:root{
  --icon-left: 9.10%;
  --icon-size: 4.60%;
  --icon1-top: 23.50%;
  --icon2-top: 34.40%;
  --icon3-top: 44.30%;
  --icon4-top: 54.80%;
  --icon5-top: 64.90%;
  --icon6-top: 75.10%;

  /* Derived edge to align to icon hot-spot left */
  --icon-left-edge: calc(var(--icon-left) - var(--icon-size)/2);

  /* Button scaling & alignment */
  --btn-scale: clamp(0.70, 0.55 + 0.05vw, 1); /* phones -> desktop */
  --done-left-nudge: 18px; /* move right relative to icon hot-spot edge */

  /* Calendar sizing */
  --dayw: 160px;
  --cal-body-h: 240px;
}

html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:#266AA4;
}
.hidden { display: none !important; }

.bg-frame { position: relative; max-width: 1366px; margin: 0 auto; line-height: 0; }
.bg-img { width: 100%; height: auto; display:block; user-select:none; pointer-events:none; }

/* Simple logo reset overlay */
.logo-reset{
  position:absolute;
  left: calc(2.4% + 1.5%);
  top: 3.2%;
  width: calc(10.5% * 2.5);
  height: calc(6.4% * 2);
  background:transparent;
  border:none;
  cursor:pointer;
  outline:none;
}
.logo-reset:focus-visible{ box-shadow:0 0 0 3px rgba(59,130,246,.35); border-radius:10px; }

/* Invisible icon hit areas */
.icon-hit{
  position:absolute; width:var(--icon-size); aspect-ratio:1/1;
  left: var(--icon-left-edge); top:0;
  background: transparent; border:none; border-radius:12px; cursor:pointer; outline:none;
}
.icon-hit.email    { top: calc(var(--icon1-top) - var(--icon-size)/2); }
.icon-hit.text     { top: calc(var(--icon2-top) - var(--icon-size)/2); }
.icon-hit.video    { top: calc(var(--icon3-top) - var(--icon-size)/2); }
.icon-hit.calendar { top: calc(var(--icon4-top) - var(--icon-size)/2); }
.icon-hit.tasks    { top: calc(var(--icon5-top) - var(--icon-size)/2); }
.icon-hit.photos   { top: calc(var(--icon6-top) - var(--icon-size)/2); }
.icon-hit:hover, .icon-hit:focus-visible{ box-shadow: 0 0 0 3px rgba(59,130,246,.22); }

/* Tooltips for icon hits */
.icon-hit[data-tip]::after{
  content: attr(data-tip);
  position:absolute;
  left: calc(100% + 8px);
  top: 50%;
  transform: translateY(-50%);
  background: rgba(15,23,42,.92);
  color: #fff;
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 8px;
  white-space: nowrap;
  box-shadow: 0 6px 14px rgba(2,8,23,.25);
  opacity: 0;
  pointer-events: none;
  transition: opacity .15s ease;
}
.icon-hit:hover::after,
.icon-hit:focus-visible::after{ opacity: 1; }

/* Done button — scalable & pinned to icon column */
.done-btn{
  position:absolute;
  left: calc(var(--icon-left-edge) + var(--done-left-nudge));
  top:  calc(var(--icon6-top) + 8.0% + 20px);

  /* scale whole pill, anchored to icon edge */
  transform: scale(var(--btn-scale));
  transform-origin: left center;

  white-space: nowrap;
  font-weight: 800;
  font-size: clamp(11px, 0.8vw + 0.35rem, 14px);
  padding: 0.70em 1.15em; /* scales with font */
  border:none; border-radius:999px;
  background:#0b3b88; color:#fff; cursor:pointer;
  box-shadow:0 8px 18px rgba(2,8,23,.22);
  transition: transform .12s ease, box-shadow .12s ease;
}

/* === Done button: lock horizontal position to your target === */
:root{
  --done-left: 6.24%;   /* set to 5px if you prefer a fixed pixel offset */
}

.done-btn{
  left: var(--done-left) !important;   /* override previous calc(...) */
  /* keep all other .done-btn styles as-is (scale, top, etc.) */
}
.done-btn:active{ transform: scale(var(--btn-scale)) translateY(1px); }
.done-btn:disabled{ opacity:.45; cursor:default; box-shadow:none; }
.done-btn:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.35); }

/* On wider browsers, slightly larger & a tiny push right (still conservative) */
@media (min-width: 1200px){
  :root{
    --btn-scale: 1.3;
    --done-left-nudge: 20px; /* brought back left vs. previous try */
  }
}

/* Main content column */
.video-wrap{
  position:absolute; left:25.5%; top:20.2%; width:56%;
  display:flex; flex-direction:column; align-items:stretch;
}

/* Start hint pill – #2A558A and a bit higher */
.start-hint{
  position:absolute; left:50%; transform:translateX(-50%);
  top:-68px;
  z-index: 2;
  background:#2A558A;
  color:#fff; font-weight:800; text-align:center;
  font-size: clamp(14px, 1.2vw + 0.5rem, 18px);
  padding: clamp(12px, 1.1vw + 10px, 18px) clamp(18px, 1.6vw + 12px, 26px);
  border-radius:999px;
  box-shadow:0 10px 24px rgba(2,8,23,.30);
  max-width: 92%;
  line-height: 1.2;
  white-space: normal;
}

/* Video frame */
.video-panel{
  position:relative; width:100%; aspect-ratio:16/9;
  border-radius:16px; overflow:hidden;
  background:#e9eef3; box-shadow:0 10px 24px rgba(2,8,23,.20);
}
.video-panel video{
  position:absolute; inset:0; width:100%; height:100%;
  border:0; display:block; object-fit:cover; background:#000; border-radius:16px;
}

/* Fade helpers for opener/mentor */
.fade-in{ animation:fadeIn .28s ease forwards; }
@keyframes fadeIn{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)} }
.fade-out{ animation:fadeOut .3s ease forwards; }
@keyframes fadeOut{ from{opacity:1} to{opacity:0} }

/* Mount area for channel content */
#choiceMount { position:relative; margin-top:12px; }

/* Panels */
#choiceMount > .panel{
  background:rgba(255,255,255,.96);
  border-radius:14px; padding:14px 16px;
  box-shadow:0 12px 28px rgba(2,8,23,.2);
  font: 14px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Arial; color:#0f172a;
  opacity:0; transform: translateY(8px);
  transition: opacity .22s ease, transform .22s ease;
}
#choiceMount > .panel.show{ opacity:1; transform:none; }

.panel h3{ margin: 0 0 8px; font-size: 14px; }
.panel .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:stretch; }
.panel .row > * { flex:1 1 220px; }

/* Cards */
.card{
  background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:12px;
  box-shadow:0 6px 14px rgba(2,8,23,.10); cursor:pointer;
  transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.card:hover{ transform: translateY(-2px); box-shadow:0 12px 24px rgba(2,8,23,.16); }
.card.selected{ border-color:#93c5fd; box-shadow:0 0 0 3px rgba(59,130,246,.20); }

/* Email bits */
.email .subject{ font-weight:700; color:#0b3b88; margin-bottom:6px; }
.email .sender{ font-size:12px; color:#6b7280; margin-bottom:6px; }
.email .snippet{ font-size:13px; color:#0f172a; }

/* Text bits */
.chat .meta{ font-weight:600; margin-bottom:6px; color:#334155; }
.chat .bubble{ background:#f1f5f9; border:1px solid #e5e7eb; border-radius:10px; padding:10px; font-size:13px; }

/* Video choice panel */
.video-choices .small-video{
  width:100%; aspect-ratio:16/9; background:#000; border-radius:12px; overflow:hidden;
  box-shadow:0 6px 14px rgba(2,8,23,.14); margin-bottom:10px;
}
.video-choices .controls{ display:flex; gap:8px; flex-wrap:wrap; }
.btn{ border:none; border-radius:999px; padding:8px 12px; font-size:13px; cursor:pointer; }
.btn.primary{ background:#0b3b88; color:#fff; }
.btn.ghost{ background:#eef2f7; color:#0f172a; border:1px solid #e5e7eb; }

/* Calendar – scrollable days with fixed times column */
.calendar .grid{ position:relative; border:1px solid #e5e7eb; border-radius:12px; overflow:hidden; }
.calendar .head{
  display:grid; grid-template-columns:60px 1fr;
  background:#f8fafc; border-bottom:1px solid #e5e7eb;
}
.calendar .times-head{ height:34px; border-right:1px solid #e5e7eb; }
.calendar .days-head-scroll{ overflow-x:auto; }
.calendar .days-head{ display:grid; grid-auto-flow:column; grid-auto-columns: var(--dayw); }
.calendar .days-head > div{
  display:flex; align-items:center; justify-content:center;
  padding:6px; font-weight:600; font-size:12px; border-left:1px solid #e5e7eb;
}

.calendar .body{ display:grid; grid-template-columns:60px 1fr; height: var(--cal-body-h); position:relative; }
.calendar .times{
  background:#f1f5f9; border-right:1px solid #e5e7eb; font-size:11px; color:#64748b;
  display:flex; flex-direction:column; justify-content:space-between; padding:6px 4px; z-index:3;
}
.calendar .days-scroll{ overflow-x:auto; position:relative; }
.calendar .days{
  position:relative;
  display:grid; grid-auto-flow: column; grid-auto-columns: var(--dayw);
  height:100%;
  background-image: repeating-linear-gradient(
    to bottom,
    #e5e7eb 0, #e5e7eb 1px,
    transparent 1px, transparent calc(12.5% - 1px)
  );
}
.calendar .day-col{ position:relative; border-left:1px solid #e5e7eb; }
.calendar .meeting{
  position:absolute; left:6px; right:6px;
  border-radius:8px; padding:4px 6px; font-size:11px; color:#fff; z-index:2;
}
.calendar .cat1{ background:#2a5d9f } .calendar .cat2{ background:#3b82f6 } .calendar .cat3{ background:#2563eb } .calendar .cat4{ background:#1d4ed8 } .calendar .cat5{ background:#60a5fa; color:#0f172a }

/* Tasks */
.tasks .tasklist{ list-style:none; margin:8px 0 0; padding:0; }
.tasks .tasklist li{
  display:flex; align-items:center; gap:10px;
  padding:10px 6px;
  border-bottom:1px solid #e5e7eb;
}
.tasks .tasklist input[type="checkbox"]{
  width:18px; height:18px; border:2px solid #0b3b88; border-radius:4px;
  appearance:none; display:grid; place-items:center; cursor:pointer;
}
.tasks .tasklist input[type="checkbox"]:checked{ background:#0b3b88; }
.tasks .tasklist label{ flex:1; cursor:pointer; }

/* Clients */
.clients .grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
.clients button{ border:1px solid #e5e7eb; background:#fff; border-radius:12px; overflow:hidden; padding:0; cursor:pointer; position:relative; }
.clients img{ width:100%; height:140px; object-fit:cover; display:block; }
.clients .badge{ position:absolute; top:8px; left:8px; padding:2px 8px; background:#ffffffdd; border:1px solid #e5e7eb; border-radius:999px; font-size:12px; }

/* Mentor (no glide; we just fade it in when needed) */
.mentor{
  margin: 12px auto 0;
  max-width: 700px;
  display:flex; align-items:center; gap:14px;
  padding:14px 16px 14px 14px;
  background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.90));
  border-radius: 16px;
  box-shadow: 0 14px 30px rgba(2,8,23,.20);
  color:#0f172a; line-height:1.35;
}
.mentor .avatar{ width:56px; height:56px; border-radius:50%; object-fit:cover; flex:0 0 auto; box-shadow: 0 2px 8px rgba(2,8,23,.15); }
.mentor .copy{ font-size:16px; }

/* Continue button below mentor */
.flow-actions{ display:flex; justify-content:center; padding:10px 0 0; }
.continue-btn{
  border:none; border-radius:999px; padding:10px 16px; font-size:14px; font-weight:800;
  background:#0b3b88; color:#fff; cursor:pointer; box-shadow:0 8px 18px rgba(2,8,23,.22);
}
.continue-btn:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.35); }

/* Responsive shifts */
@media (max-width: 1200px){
  .video-wrap{ left:26.25%; width:58%; top:20.5%; }
}
@media (max-width: 1000px){
  .video-wrap{ left:27.25%; width:58%; top:21%; }
}
@media (max-width: 900px){
  .video-wrap{ left:28.25%; width:60%; top:22%; }
  .mentor{ max-width:none; }
  .mentor .copy{ font-size:14px; }
  :root{ --icon-size:5.2%; }
}
@media (max-width: 600px){
  .panel .row > * { flex:1 1 100%; min-width: 0; }
  .start-hint{ top:-56px; max-width: 96%; }
}
@media (max-width: 380px){
  :root{ --btn-scale: 0.66; }
}

/* ----- Debug overlay ----- */
#debugMarker{
  position:absolute;
  width:160px; height:40px;
  outline:2px solid red;
  border-radius:10px;
  pointer-events:none;
  z-index: 9999;
}
#debugHUD{
  position:fixed; right:12px; top:12px;
  background: rgba(2,8,23,.78);
  color:#fff; font: 12px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  padding:10px 12px; border-radius:10px; z-index: 10000;
  box-shadow: 0 12px 28px rgba(2,8,23,.35);
}
#debugHUD code{ font-family:inherit; background:rgba(255,255,255,.1); padding:0 4px; border-radius:6px; }
